<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camplify Sales Assistant | Happy Camper Upsell</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .slide-in { animation: slideIn 0.3s ease-out forwards; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* Custom scrollbar for script area */
        .script-area::-webkit-scrollbar { width: 8px; }
        .script-area::-webkit-scrollbar-track { background: #f1f1f1; }
        .script-area::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .script-area::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        /* Step styling */
        .script-beat { position: relative; padding-left: 20px; border-left: 2px solid #e5e7eb; margin-bottom: 24px; transition: all 0.2s; }
        .script-beat:hover { border-left-color: #0d9488; }
        .script-beat.active { border-left-color: #0d9488; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- Icons ---
        const Icons = {
            Phone: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>,
            ShieldAlert: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>,
            ShieldCheck: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="M9 12l2 2 4-4"></path></svg>,
            DollarSign: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>,
            AlertTriangle: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>,
            HelpCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>,
            CheckCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>,
            CreditCard: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg>,
            Settings: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 5 9.4a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>,
            ChevronRight: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>,
            MessageBubble: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
        };

        // --- Pricing Data ---
        const pricingData = {
            campervan: { label: 'Drive: Campervan', rtExcess: 4000, rtCost: 19, hcExcess: 500, hcCost: 39 },
            motorhome: { label: 'Drive: Motorhome', rtExcess: 4500, rtCost: 29, hcExcess: 500, hcCost: 49 },
            driveOffroad: { label: 'Drive: 4WD/Off-Road', rtExcess: 5500, rtCost: 29, hcExcess: 500, hcCost: 49 },
            towOnroad: { label: 'Tow: On-Road', rtExcess: 4000, rtCost: 19, hcExcess: 500, hcCost: 39 },
            towOffroad: { label: 'Tow: Off-Road', rtExcess: 4500, rtCost: 29, hcExcess: 500, hcCost: 49 },
            driveToTow: { label: 'Drive to Tow', rtExcess: 4000, rtCost: 25, hcExcess: 500, hcCost: 45 },
            deliverStay: { label: 'Deliver / Stay', rtExcess: 1000, rtCost: 9, hcExcess: 250, hcCost: 15 },
        };

        // --- Components ---

        const Beat = ({ title, children, highlight }) => (
            <div className={`script-beat ${highlight ? 'active' : ''}`}>
                <div className="text-xs font-bold text-gray-400 uppercase tracking-wide mb-2 flex items-center gap-2">
                    {title}
                </div>
                <div className={`text-lg leading-relaxed font-medium ${highlight ? 'text-gray-900' : 'text-gray-700'}`}>
                    {children}
                </div>
            </div>
        );

        const InputGroup = ({ label, name, value, onChange, type, prefix }) => (
            <div className="flex flex-col">
                <label className="text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wider">{label}</label>
                <div className="relative">
                    {prefix && <span className="absolute left-3 top-2 text-gray-400">{prefix}</span>}
                    <input 
                        type={type} 
                        name={name} 
                        value={value} 
                        onChange={onChange}
                        className={`w-full border border-gray-300 rounded-md p-2 text-gray-800 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none ${prefix ? 'pl-6' : ''}`}
                    />
                </div>
            </div>
        );

        const ToneToggle = ({ tone, setTone }) => (
            <div className="flex bg-gray-200 p-1 rounded-lg w-fit mb-6">
                <button 
                    onClick={() => setTone('soft')}
                    className={`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${tone === 'soft' ? 'bg-white text-teal-700 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}
                >
                    Conversational
                </button>
                <button 
                    onClick={() => setTone('strong')}
                    className={`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${tone === 'strong' ? 'bg-blue-50 text-blue-700 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}
                >
                    Direct
                </button>
            </div>
        );

        const ConfigPanel = ({ config, handleConfigChange, toggleConfig }) => {
            if (!config.isConfigOpen) return null;
            return (
                <div className="bg-white p-6 border-b border-gray-200 shadow-sm animate-fade-in">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-lg font-bold text-gray-800">Pre-Call Configuration</h2>
                        <button onClick={toggleConfig} className="text-sm text-blue-600 hover:underline">Done</button>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div className="md:col-span-1">
                            <label className="text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wider block">Vehicle Type</label>
                            <select 
                                name="vehicleType" 
                                value={config.vehicleType} 
                                onChange={handleConfigChange}
                                className="w-full border border-gray-300 rounded-md p-2 text-gray-800 focus:ring-2 focus:ring-teal-500 outline-none bg-white"
                            >
                                {Object.entries(pricingData).map(([key, data]) => (
                                    <option key={key} value={key}>{data.label}</option>
                                ))}
                            </select>
                        </div>
                        <InputGroup label="Agent Name" name="agentName" value={config.agentName} type="text" onChange={handleConfigChange} />
                        <InputGroup label="Customer Name" name="customerName" value={config.customerName} type="text" onChange={handleConfigChange} />
                        <InputGroup label="Trip Days" name="bookingDays" value={config.bookingDays} type="number" onChange={handleConfigChange} />
                        
                        <InputGroup label="Risk Taker Excess" name="rtExcess" value={config.rtExcess} type="number" prefix="$" onChange={handleConfigChange} />
                        <InputGroup label="Upgrade Difference/Day" name="hcUpgradeCost" value={config.hcUpgradeCost} type="number" prefix="$" onChange={handleConfigChange} />
                        <InputGroup label="Happy Camper Excess" name="hcExcess" value={config.hcExcess} type="number" prefix="$" onChange={handleConfigChange} />
                    </div>
                </div>
            );
        };

        const Navigation = ({ currentStep, setCurrentStep, config, toggleConfig }) => {
            const steps = [
                { id: 'intro', label: '1. Introduction', icon: Icons.Phone },
                { id: 'risk', label: '2. The 2 Options', icon: Icons.ShieldAlert },
                { id: 'solution', label: '3. Happy Camper', icon: Icons.ShieldCheck },
                { id: 'story', label: '4. Financial Story', icon: Icons.DollarSign },
                { id: 'objections', label: '5. Objections', icon: Icons.HelpCircle },
                { id: 'close', label: '6. Close', icon: Icons.CheckCircle },
                { id: 'process', label: '7. Process', icon: Icons.CreditCard },
            ];

            return (
                <div className="w-full md:w-64 bg-white border-r border-gray-200 flex-shrink-0 flex flex-col h-full overflow-y-auto">
                    <div className="p-4 border-b border-gray-100">
                        <h1 className="text-xl font-bold text-teal-600 tracking-tight">Camplify Assist</h1>
                        <p className="text-xs text-gray-500 mt-1">Upsell Companion</p>
                    </div>
                    
                    <div className="flex-1 py-4">
                        {steps.map(step => (
                            <button
                                key={step.id}
                                onClick={() => { setCurrentStep(step.id); if(window.innerWidth < 768) window.scrollTo(0,0); }}
                                className={`w-full text-left px-4 py-3 flex items-center gap-3 transition-colors ${
                                    currentStep === step.id 
                                    ? 'bg-teal-50 text-teal-700 border-r-4 border-teal-500' 
                                    : 'text-gray-600 hover:bg-gray-50'
                                }`}
                            >
                                <span className={currentStep === step.id ? 'text-teal-600' : 'text-gray-400'}>
                                    <step.icon />
                                </span>
                                <span className="font-medium text-sm">{step.label}</span>
                            </button>
                        ))}
                    </div>

                    <div className="p-4 border-t border-gray-100 bg-gray-50">
                        <button 
                            onClick={toggleConfig}
                            className="w-full flex items-center justify-center gap-2 bg-gray-800 text-white py-2 px-4 rounded-lg text-sm hover:bg-gray-700 transition"
                        >
                            <Icons.Settings />
                            {config.isConfigOpen ? 'Hide Setup' : 'Edit Numbers'}
                        </button>
                    </div>
                </div>
            );
        };

        const IntroContent = ({ tone, setTone, config, setCurrentStep }) => (
            <div className="slide-in">
                <ToneToggle tone={tone} setTone={setTone} />
                <div className="bg-white p-8 rounded-xl border border-gray-200 shadow-sm">
                    {tone === 'soft' ? (
                        <>
                            <Beat title="1. The Personal Check-in" highlight>
                                "Hi <span className="text-teal-600 font-bold">{config.customerName}</span>, how are you doing?"
                            </Beat>
                            <Beat title="2. The Reason">
                                "I’m calling from Camplify about your booking starting in <span className="text-teal-600 font-bold">{config.daysUntilTrip} days</span>."
                            </Beat>
                            <Beat title="3. The Compliment">
                                "You chose a great one!"
                            </Beat>
                            <Beat title="4. The Topic">
                                "I specifically wanted to touch base regarding the excess reduction plans for any incidents on your trip."
                            </Beat>
                        </>
                    ) : (
                        <>
                            <Beat title="1. Personal Greeting" highlight>
                                "Hi <span className="text-blue-600 font-bold">{config.customerName}</span>."
                            </Beat>
                            <Beat title="2. The Reason">
                                "It's <span className="text-blue-600 font-bold">{config.agentName}</span> calling from Camplify customer success about your upcoming booking."
                            </Beat>
                            <Beat title="3. The Compliment">
                                "You have chosen an awesome rig!"
                            </Beat>
                            <Beat title="4. The Hook">
                                "So we just need to go over your excess reduction plan."
                            </Beat>
                            <Beat title="5. The Urgency">
                                "It's important we review this before the trip starts to ensure you are fully prepared and protected."
                            </Beat>
                        </>
                    )}
                </div>
                
                <div className="mt-6 flex justify-end">
                    <button onClick={() => setCurrentStep('risk')} className="flex items-center gap-2 bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition font-medium">
                        Explain the Plans <Icons.ChevronRight />
                    </button>
                </div>
            </div>
        );

        const RiskContent = ({ tone, config, formatCurrency, setCurrentStep }) => (
            <div className="slide-in">
                <h2 className="text-xl font-bold text-gray-800 mb-4">The "Two Plans"</h2>
                
                <div className="bg-white p-8 rounded-xl border border-gray-200 shadow-sm">
                    <Beat title="1. The Landscape" highlight>
                        "So, essentially we have 2 plans available for your trip."
                    </Beat>
                    
                    <Beat title="2. Status Quo">
                        "I can see you are currently on our default <span className="text-red-600 font-bold">'Risk Taker'</span> package."
                    </Beat>

                        <Beat title="3. The Reality">
                        "This is the standard option, but it does leave you with the highest cost if incidents occur."
                    </Beat>

                    <Beat title="4. The Pivot">
                        "I'm not sure if you saw, but we do have a second option which significantly reduces your out-of-pocket expenses."
                    </Beat>

                    {tone === 'strong' && (
                        <div className="ml-5 mt-4 p-4 bg-blue-50 rounded-lg border border-blue-100">
                            <p className="text-gray-800 text-sm font-medium">
                                "Right now on Risk Taker, you are exposed to the full {formatCurrency(config.rtExcess)} excess."
                            </p>
                        </div>
                    )}
                </div>

                    <div className="mt-6 flex justify-end">
                    <button onClick={() => setCurrentStep('solution')} className="flex items-center gap-2 bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition font-medium">
                        The Value Proposition <Icons.ChevronRight />
                    </button>
                </div>
            </div>
        );

        const SolutionContent = ({ config, formatCurrency, totalUpgradeCost, setCurrentStep }) => (
                <div className="slide-in">
                <h2 className="text-xl font-bold text-gray-800 mb-4">The Solution</h2>
                
                <div className="bg-white p-8 rounded-xl border border-gray-200 shadow-sm">
                    <Beat title="1. The Peace of Mind" highlight>
                        "So we have Happy Camper, the package that offers the <strong>most peace of mind for your holiday</strong>."
                    </Beat>

                    <Beat title="2. The Cost">
                        "And for your specific booking, it would work out to <span className="font-bold text-teal-700">{formatCurrency(config.hcUpgradeCost)}</span> per day, and <span className="font-bold text-teal-700">{formatCurrency(totalUpgradeCost)}</span> total to upgrade."
                    </Beat>

                    <Beat title="3. The Coverage Gain">
                        "You gain coverage you don't have on Risk Taker for windscreens, tyres, and awnings."
                    </Beat>

                    <Beat title="4. The Exposure Drop">
                        "And you reduce your maximum excess cost from <span className="font-bold text-red-600">{formatCurrency(config.rtExcess)}</span> to <span className="font-bold text-blue-600">{formatCurrency(config.hcExcess)}</span> per incident."
                    </Beat>

                    <div className="mt-6 p-4 bg-teal-50 rounded-lg border border-teal-100">
                        <div className="flex justify-between items-center">
                            <span className="text-teal-800 font-medium">Daily Cost</span>
                            <span className="text-teal-800 font-bold">{formatCurrency(config.hcUpgradeCost)}</span>
                        </div>
                            <div className="flex justify-between items-center mt-2">
                            <span className="text-teal-800 font-medium">Coverage</span>
                            <span className="text-teal-800 font-bold">Comprehensive + Under 25 Excess Waived</span>
                        </div>
                    </div>
                </div>

                    <div className="mt-6 flex justify-end">
                    <button onClick={() => setCurrentStep('story')} className="flex items-center gap-2 bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition font-medium">
                        Visualise Value <Icons.ChevronRight />
                    </button>
                </div>
                </div>
        );

        const StoryContent = ({ config, formatCurrency, totalUpgradeCost, excessDiff, setCurrentStep }) => (
            <div className="slide-in">
                    <h2 className="text-xl font-bold text-gray-800 mb-4">The Financial Story</h2>
                    
                    <div className="bg-white p-8 rounded-xl border border-gray-200 shadow-sm mb-6">
                    <Beat title="1. The Investment" highlight>
                        "Let's look at the simple math for your <strong>{config.bookingDays} day trip</strong>."
                    </Beat>
                    <Beat title="2. The Cost">
                            "The total cost to upgrade to Happy Camper is just <span className="text-teal-600 font-bold">{formatCurrency(totalUpgradeCost)}</span>."
                    </Beat>
                        <Beat title="3. The Risk">
                            "If an incident occurs on Risk Taker, it could end up costing <span className="text-red-600 font-bold">{formatCurrency(config.rtExcess)}</span>, rather than only <span className="text-teal-600 font-bold">{formatCurrency(config.hcExcess)}</span> on Happy Camper."
                    </Beat>
                    <Beat title="4. The Return">
                            "So essentially, you are spending <strong>{formatCurrency(totalUpgradeCost)}</strong> to save yourself from a potential extra <strong>{formatCurrency(excessDiff)}</strong> bill."
                    </Beat>
                    <Beat title="5. The Goal">
                        "I want to ensure any unexpected incidents do not take away from your holiday and Camplify experience."
                    </Beat>
                    </div>
                
                <div className="grid grid-cols-2 gap-4 mb-6">
                    <div className="bg-white p-6 rounded-xl border-2 border-teal-500 shadow-sm text-center">
                        <div className="text-xs text-gray-500 uppercase tracking-wide font-bold mb-1">Total Cost to Upgrade</div>
                        <div className="text-3xl font-bold text-teal-600">{formatCurrency(totalUpgradeCost)}</div>
                        <div className="text-xs text-gray-400 mt-2">Fixed & Known</div>
                    </div>

                    <div className="bg-white p-6 rounded-xl border-2 border-gray-200 shadow-sm text-center relative overflow-hidden">
                            <div className="absolute top-0 right-0 bg-red-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg">IF INCIDENT OCCURS</div>
                        <div className="text-xs text-gray-500 uppercase tracking-wide font-bold mb-1">Amount You Save</div>
                        <div className="text-3xl font-bold text-gray-800">{formatCurrency(excessDiff)}</div>
                        <div className="text-xs text-gray-400 mt-2">Difference in Excess</div>
                    </div>
                </div>

                    <div className="mt-6 flex justify-end">
                    <button onClick={() => setCurrentStep('objections')} className="flex items-center gap-2 bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition font-medium">
                        Handle Objections <Icons.ChevronRight />
                    </button>
                </div>
            </div>
        );

        const ObjectionsContent = ({ formatCurrency, totalUpgradeCost, excessDiff, config, setCurrentStep }) => {
            const [activeObj, setActiveObj] = React.useState(null);

            const objections = [
                {
                    id: 'careful',
                    trigger: "I'm a careful driver",
                    response: (
                        <div className="space-y-3">
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 1:</span> "Absolutely – and most of our careful drivers still upgrade."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 2:</span> "The biggest claims aren’t from bad driving. They’re from things you can’t control, like weather, stones, or wildlife."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 3:</span> "Happy Camper is protection from unpredictability, not a reflection on your driving."</div>
                        </div>
                    )
                },
                {
                    id: 'money',
                    trigger: "I don't want to spend more money",
                    response: (
                        <div className="space-y-3">
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 1:</span> "I get that completely."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 2:</span> "But looking at the math, the upgrade is roughly <strong>{formatCurrency(totalUpgradeCost)}</strong> for the whole trip."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 3:</span> "So you’re spending a small amount now to avoid a potential extra <strong>{formatCurrency(excessDiff)}</strong> cost later."</div>
                        </div>
                    )
                },
                {
                    id: 'never',
                    trigger: "I've never had issues before",
                    response: (
                        <div className="space-y-3">
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 1:</span> "That’s totally fair."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 2:</span> "However, campers are larger, heavier, and more exposed to wind and debris than cars."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 3:</span> "Most of our first claims actually come from people who’ve never had an issue before."</div>
                        </div>
                    )
                },
                {
                    id: 'delivery',
                    trigger: "It's a delivery or stay booking",
                    response: (
                        <div className="space-y-3">
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 1:</span> "I completely understand why you'd feel that way, since you aren't driving."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 2:</span> "But even when parked, things like storms, falling branches, or campground bumps can still happen."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 3:</span> "On these bookings, Happy Camper reduces your liability from <strong>$1,000</strong> down to just <strong>$250</strong>, which is why most people still upgrade."</div>
                        </div>
                    )
                },
                {
                    id: 'risk_it',
                    trigger: "I think I'll risk it",
                    response: (
                        <div className="space-y-3">
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 1:</span> "That’s completely your choice. I just want to ensure it’s an informed one."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 2:</span> "Without Happy Camper, items like tyres, windscreens, and awnings remain fully your responsibility."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 3:</span> "And remember, the excess per incident stays high at {formatCurrency(config.rtExcess)}."</div>
                        </div>
                    )
                },
                {
                    id: 'later',
                    trigger: "Can I decide later?",
                    response: (
                        <div className="space-y-3">
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 1:</span> "You can, but only <strong>before</strong> the booking starts."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 2:</span> "Once the booking has commenced, we can’t add or backdate cover."</div>
                            <div className="text-gray-800"><span className="font-bold text-teal-600">Step 3:</span> "That is why we reach out now, so you aren't stuck without options later."</div>
                        </div>
                    )
                }
            ];

            return (
                <div className="slide-in">
                    <h2 className="text-xl font-bold text-gray-800 mb-4">Objection Handling Bank</h2>
                    <div className="grid gap-3">
                        {objections.map((obj) => (
                            <div key={obj.id} className="border border-gray-200 rounded-lg bg-white overflow-hidden">
                                <button 
                                    onClick={() => setActiveObj(activeObj === obj.id ? null : obj.id)}
                                    className={`w-full text-left px-4 py-3 font-medium flex justify-between items-center ${activeObj === obj.id ? 'bg-gray-50 text-teal-600' : 'text-gray-700 hover:bg-gray-50'}`}
                                >
                                    "{obj.trigger}"
                                    <span className={`transform transition-transform ${activeObj === obj.id ? 'rotate-180' : ''}`}>▼</span>
                                </button>
                                {activeObj === obj.id && (
                                    <div className="p-4 bg-teal-50 text-gray-800 border-t border-gray-100 leading-relaxed animate-fade-in text-sm">
                                        {obj.response}
                                    </div>
                                )}
                            </div>
                        ))}
                    </div>
                    <div className="mt-6 flex justify-end">
                        <button onClick={() => setCurrentStep('close')} className="flex items-center gap-2 bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition font-medium">
                            Go for Close <Icons.ChevronRight />
                        </button>
                    </div>
                </div>
            );
        };

        const CloseContent = ({ config, formatCurrency, setCurrentStep }) => (
            <div className="slide-in">
                <h2 className="text-xl font-bold text-gray-800 mb-6">Closing the Sale</h2>
                
                <div className="space-y-6">
                    <div className="bg-white p-6 rounded-xl border-l-4 border-blue-400 shadow-sm cursor-pointer hover:bg-blue-50 transition">
                        <span className="text-xs font-bold text-blue-500 uppercase tracking-wide">Soft Close</span>
                        <p className="mt-2 text-lg text-gray-800 font-medium">"Shall I switch that over now so you're all sorted before the trip?"</p>
                    </div>

                    <div className="bg-white p-6 rounded-xl border-l-4 border-teal-500 shadow-sm ring-2 ring-teal-50 cursor-pointer hover:bg-teal-50 transition">
                        <span className="text-xs font-bold text-teal-600 uppercase tracking-wide">Standard Close</span>
                        <p className="mt-2 text-lg text-gray-800 font-medium">"For {formatCurrency(config.hcUpgradeCost)} a day, does it make sense to lock in that peace of mind?"</p>
                    </div>

                    <div className="bg-white p-6 rounded-xl border-l-4 border-orange-500 shadow-sm cursor-pointer hover:bg-orange-50 transition">
                        <span className="text-xs font-bold text-orange-600 uppercase tracking-wide">Logic Close</span>
                        <p className="mt-2 text-lg text-gray-800 font-medium">"Given the exclusions on Risk Taker, upgrading is the safer financial option. Shall I process that upgrade for you?"</p>
                    </div>
                </div>

                <div className="mt-8 pt-8 border-t border-gray-200">
                        <button onClick={() => setCurrentStep('process')} className="w-full bg-teal-600 text-white py-4 rounded-xl font-bold text-lg hover:bg-teal-700 transition shadow-md flex justify-center items-center gap-2">
                            Customer Agreed → Process Upgrade <Icons.CreditCard />
                    </button>
                </div>
            </div>
        );

        const ProcessContent = ({ setCurrentStep }) => (
            <div className="slide-in">
                <h2 className="text-xl font-bold text-gray-800 mb-6">Processing the Upgrade</h2>
                
                <div className="bg-white p-8 rounded-xl border border-gray-200 shadow-sm">
                    <Beat title="1. The Action" highlight>
                        "Great choice. I can process that upgrade for you right now on our system."
                    </Beat>
                    <Beat title="2. The Payment">
                        "It will simply charge the payment method you used for the booking."
                    </Beat>
                    <Beat title="3. Final Confirmation">
                        "Shall I go ahead and put that through for you?"
                    </Beat>
                    <Beat title="4. The Outcome">
                        "Once done, you'll receive an updated booking confirmation via email immediately."
                    </Beat>
                    <div className="mt-6 p-4 bg-green-50 text-green-800 rounded-lg border border-green-100 font-medium text-center">
                        "Thanks so much for getting that sorted. You are all set! Have a safe and wonderful adventure."
                    </div>
                </div>

                <div className="mt-8 flex justify-center">
                        <button onClick={() => window.location.reload()} className="text-gray-400 hover:text-gray-600 text-sm flex items-center gap-2">
                        Reset Interaction <Icons.Settings className="w-4 h-4" />
                    </button>
                </div>
            </div>
        );

        // --- Main App Component ---
        
        const App = () => {
            // State for app configuration (The Numbers)
            const [config, setConfig] = React.useState({
                agentName: "Alex",
                customerName: "Customer",
                daysUntilTrip: 5,
                bookingDays: 7,
                vehicleType: 'campervan', // Default
                rtExcess: 4000,
                hcUpgradeCost: 20, // 39 - 19
                hcExcess: 500,
                isConfigOpen: true
            });

            // State for navigation
            const [currentStep, setCurrentStep] = React.useState('intro'); // intro, risk, solution, story, objections, close, process
            
            // State for tone
            const [tone, setTone] = React.useState('soft'); // soft, strong

            // Derived values
            const totalUpgradeCost = config.hcUpgradeCost * config.bookingDays;
            const excessDiff = config.rtExcess - config.hcExcess;

            // Formatter
            const formatCurrency = (val) => new Intl.NumberFormat('en-AU', { style: 'currency', currency: 'AUD', minimumFractionDigits: 0 }).format(val);

            // Handlers
            const handleConfigChange = (e) => {
                const { name, value } = e.target;
                setConfig(prev => ({
                    ...prev,
                    [name]: name === 'agentName' || name === 'customerName' || name === 'vehicleType' ? value : Number(value)
                }));

                // Auto-update numbers if vehicle type changes
                if (name === 'vehicleType') {
                    const data = pricingData[value];
                    if (data) {
                        const upgradeDiff = data.hcCost - data.rtCost;
                        setConfig(prev => ({
                            ...prev,
                            vehicleType: value,
                            rtExcess: data.rtExcess,
                            hcUpgradeCost: upgradeDiff,
                            hcExcess: data.hcExcess
                        }));
                    }
                }
            };

            const toggleConfig = () => setConfig(prev => ({ ...prev, isConfigOpen: !prev.isConfigOpen }));

            // Main Render Logic
            return (
                <div className="flex flex-col md:flex-row h-screen bg-gray-50">
                    <Navigation currentStep={currentStep} setCurrentStep={setCurrentStep} config={config} toggleConfig={toggleConfig} />
                    
                    <main className="flex-1 flex flex-col h-screen overflow-hidden relative">
                        {/* Config Dropdown Overlay */}
                        <div className={`absolute top-0 left-0 w-full z-20 transition-all duration-300 ${config.isConfigOpen ? 'translate-y-0' : '-translate-y-full'}`}>
                            <ConfigPanel config={config} handleConfigChange={handleConfigChange} toggleConfig={toggleConfig} />
                        </div>

                        {/* Top Bar for Context (Mobile mostly, but useful on desktop) */}
                        <div className="bg-white border-b border-gray-200 p-4 flex justify-between items-center shadow-sm z-10">
                            <div>
                                <span className="text-xs text-gray-500 uppercase tracking-wide">Upgrade Total</span>
                                <div className="text-xl font-bold text-teal-600">{formatCurrency(totalUpgradeCost)}</div>
                            </div>
                            <div className="text-right">
                                <span className="text-xs text-gray-500 uppercase tracking-wide">Potential Excess Savings</span>
                                <div className="text-xl font-bold text-gray-800">{formatCurrency(excessDiff)}</div>
                            </div>
                        </div>

                        {/* Script Area */}
                        <div className="flex-1 overflow-y-auto p-4 md:p-8 script-area relative">
                            <div className="max-w-3xl mx-auto pb-20">
                                {currentStep === 'intro' && <IntroContent tone={tone} setTone={setTone} config={config} setCurrentStep={setCurrentStep} />}
                                {currentStep === 'risk' && <RiskContent tone={tone} config={config} formatCurrency={formatCurrency} setCurrentStep={setCurrentStep} />}
                                {currentStep === 'solution' && <SolutionContent config={config} formatCurrency={formatCurrency} totalUpgradeCost={totalUpgradeCost} setCurrentStep={setCurrentStep} />}
                                {currentStep === 'story' && <StoryContent config={config} formatCurrency={formatCurrency} totalUpgradeCost={totalUpgradeCost} excessDiff={excessDiff} setCurrentStep={setCurrentStep} />}
                                {currentStep === 'objections' && <ObjectionsContent formatCurrency={formatCurrency} totalUpgradeCost={totalUpgradeCost} excessDiff={excessDiff} config={config} setCurrentStep={setCurrentStep} />}
                                {currentStep === 'close' && <CloseContent config={config} formatCurrency={formatCurrency} setCurrentStep={setCurrentStep} />}
                                {currentStep === 'process' && <ProcessContent setCurrentStep={setCurrentStep} />}
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
